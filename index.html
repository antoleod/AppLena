<!doctype html>

<html lang="fr" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Appli de LÃ©na â€” 2e primaire</title>
    <meta name="theme-color" content="#f472b6">
    <meta name="color-scheme" content="light">
    <style>
      :root{
        --bg-1:#fdf2f8; --bg-2:#fae8ff; --bg-3:#e9d5ff; --fg:#1f2937;
        --card:rgba(255,255,255,.94); --muted:#6b7280; --ring:#ec4899;
        --good:#22c55e; --bad:#ef4444; --purple:#a78bfa;
      }
      *{box-sizing:border-box}
      html,body,#root{height:100%}
      body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;color:var(--fg);-webkit-font-smoothing:antialiased;
        background:linear-gradient(135deg,var(--bg-1),var(--bg-2),var(--bg-3));background-size:200% 200%;animation:bg-pan 26s linear infinite;}
      @keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
      .container{max-width:1100px;margin:0 auto;padding:16px;display:flex;flex-direction:column;gap:16px}
      .header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:linear-gradient(90deg,#fff,rgba(255,255,255,.85));border-radius:20px;box-shadow:0 8px 24px rgba(0,0,0,.06)}
      .brand{display:flex;align-items:center;gap:10px}
      .brand .title{font-weight:900;font-size:22px;background:linear-gradient(90deg,#ec4899,#f59e0b,#10b981,#3b82f6,#8b5cf6);-webkit-background-clip:text;background-clip:text;color:transparent}
      .bill-purse{display:flex;align-items:center;gap:6px;font-weight:700}
      .card{background:var(--card);border-radius:24px;padding:16px;box-shadow:0 12px 28px rgba(0,0,0,.06)}
      .grid{display:grid;gap:14px}
      @media (min-width:640px){.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr));}}
      @media (max-width:639.98px){.grid.cols-3{grid-template-columns:repeat(2,minmax(0,1fr));}}
      .icon-btn{position:relative;border:1px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#ec4899,#f59e0b,#10b981,#3b82f6,#8b5cf6) border-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease;cursor:pointer;color:var(--fg)}
      @keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}
      .icon-emoji{font-size:34px}
      .icon-label{font-weight:800;font-size:16px}
      .icon-desc{font-size:12px;color:var(--muted)}
      .back{border:none;background:#fff;border-radius:14px;padding:10px 12px;box-shadow:0 6px 16px rgba(0,0,0,.06);display:inline-flex;align-items:center;gap:8px;cursor:pointer}
      .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
      .caption{color:var(--muted);font-size:12px}
      .progress{height:8px;border-radius:999px;background:#f3e8ff;overflow:hidden}
      .progress > span{display:block;height:100%;background:linear-gradient(90deg,#a78bfa,#ec4899);transition:width .2s}
      /* options */
      .opt{position:relative;border:1px solid #f3e8ff;background:#fff;border-radius:16px;padding:14px 16px;min-height:96px;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 10px 20px rgba(0,0,0,.06);cursor:pointer;transition:transform .08s}
      .opt:active{transform:scale(.98)}
      .opt .emo{font-size:26px}
      .opt .lbl{font-weight:800}
      .opt .badge{position:absolute;left:8px;top:8px;background:#a78bfa;color:#fff;border-radius:999px;width:24px;height:24px;font-size:12px;display:flex;align-items:center;justify-content:center;font-weight:800}
      /* modal */
      .modal-wrap{position:fixed;inset:0;background:rgba(15,23,42,.38);display:flex;align-items:center;justify-content:center;z-index:50;animation:fade .15s}
      .modal{background:#fff;border-radius:18px;padding:18px 18px;min-width:260px;max-width:92vw;text-align:center;box-shadow:0 24px 60px rgba(0,0,0,.25);animation:pop .2s}
      .modal h3{margin:8px 0 6px;font-size:18px;font-weight:900}
      .modal .big{font-size:56px}
      .modal .actions{margin-top:10px;display:flex;gap:8px;justify-content:center}
      @keyframes fade{from{opacity:0}to{opacity:1}} @keyframes pop{from{transform:scale(.92)}to{transform:scale(1)}}
      .modal[data-type="bad"]{animation:shake .35s ease-in-out,pop .2s}
      @keyframes shake{10%{transform:translateX(-4px)}20%{transform:translateX(4px)}30%{transform:translateX(-3px)}40%{transform:translateX(3px)}60%{transform:translateX(2px)}100%{transform:translateX(0)}}
      /* dots base-10 */
      .ten,.unit{display:grid;grid-template-columns:repeat(10,10px);gap:6px;align-items:center}
      .unit{grid-template-columns:repeat(10,10px)}
      .dot{width:10px;height:10px;border-radius:50%;background:#8b5cf6;box-shadow:0 1px 0 rgba(0,0,0,.08)}
      .money{display:inline-block;margin:2px;font-size:22px;animation:jump .3s ease-in-out}
      @keyframes jump{0%{transform:translateY(6px)}50%{transform:translateY(-2px)}100%{transform:translateY(0)}}
    .number-line{display:flex;gap:6px;align-items:center;margin:8px 0}
      .tick{width:14px;height:14px;border-radius:3px;background:#fff;box-shadow:0 1px 0 rgba(0,0,0,.1)}
      .tick.on{background:#22c55e}
      .tick.step{background:#a78bfa}
      .board{display:grid;gap:8px}
      .board.cols-4{grid-template-columns:repeat(4,60px)}
      .tile{width:60px;height:60px;border-radius:12px;background:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;box-shadow:0 8px 18px rgba(0,0,0,.08);cursor:pointer}
      .tile.fixed{background:#f3f4f6;color:#6b7280;cursor:default}
      .card-wrap{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
      .card-flip{position:relative;height:110px;border-radius:14px;perspective:600px}
      .face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;border-radius:14px;background:#fff;box-shadow:0 8px 18px rgba(0,0,0,.08);backface-visibility:hidden;transition:transform .25s}
      .backface{transform:rotateY(180deg)}
      .is-open .front{transform:rotateY(180deg)}
      .is-open .backface{transform:rotateY(0)}
    /* â€”â€” Unicorn polish â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
      body::before{content:'';position:fixed;inset:0;pointer-events:none;opacity:.45;mix-blend-mode:soft-light;background:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(2px 2px at 40% 80%, rgba(255,255,255,.35), transparent 60%);
      }
      .card h2{background:linear-gradient(90deg,#ec4899,#f59e0b,#10b981,#3b82f6,#8b5cf6);-webkit-background-clip:text;background-clip:text;color:transparent}
      .icon-btn:hover{transform:translateY(-4px);box-shadow:0 14px 30px rgba(0,0,0,.12)}
      .icon-btn .icon-emoji{position:relative}
      .icon-btn .icon-emoji::after{content:'';position:absolute;inset:-10px;background:radial-gradient(closest-side,rgba(236,72,153,.25),transparent);filter:blur(6px);border-radius:50%;z-index:-1}
      .opt{background:linear-gradient(180deg,#fff,#fdf2f8);border:1px solid rgba(167,139,250,.25)}
      .opt:hover{box-shadow:0 12px 26px rgba(0,0,0,.12)}
      .opt.pop{animation:popbtn .22s ease}
      @keyframes popbtn{0%{transform:scale(.98)}70%{transform:scale(1.03)}100%{transform:scale(1)}}
      .back{position:relative;overflow:hidden}
      .back::after{content:'';position:absolute;inset:0;opacity:0;background:radial-gradient(120px 40px at var(--x,50%) 120%, rgba(236,72,153,.15), transparent);transition:opacity .2s}
      .back:hover::after{opacity:1}
      .progress{background:linear-gradient(90deg, rgba(167,139,250,.25), rgba(236,72,153,.25))}
      .progress>span{background:linear-gradient(90deg,#a78bfa,#ec4899,#f59e0b)}
      ::-webkit-scrollbar{height:10px;width:10px}::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#a78bfa,#ec4899);border-radius:999px}
    </style>
  </head>
  <body>
    <div id="root"></div><script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
  const { useState, useMemo, useEffect, useRef } = React;

  // ===== Utils
  const r = (min,max)=> Math.floor(Math.random()*(max-min+1))+min;
  const shuffle = (a)=>{const b=[...a]; for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [b[i],b[j]]=[b[j],b[i]];} return b;};
  const makeChoices=(correct)=>{const s=new Set([correct]); while(s.size<4){const d=Math.max(1,Math.round(Math.abs(correct)*0.2)+1); s.add(correct + (Math.random()<.5?-1:1)*r(1,d));} return shuffle([...s]).slice(0,4)};

  function confettiBurst(x,y){ // lightweight confetti (emojis)
    const emo=['ğŸ’œ','ğŸ’™','ğŸ’š','ğŸ’›','ğŸ¦„','âœ¨'];
    for(let i=0;i<12;i++){
      const span=document.createElement('span');
      span.textContent=emo[r(0,emo.length-1)];
      span.style.position='fixed'; span.style.left=x+'px'; span.style.top=y+'px';
      span.style.pointerEvents='none'; span.style.transition='transform .8s, opacity .8s';
      document.body.appendChild(span);
      requestAnimationFrame(()=>{
        span.style.transform=`translate(${r(-120,120)}px, ${r(-120,120)}px) rotate(${r(-180,180)}deg)`; span.style.opacity='0';
      });
      setTimeout(()=> span.remove(), 900);
    }
  }

  // Unicorn sparkle trail (desktop only)
  ;(()=>{try{ if(!window.matchMedia('(pointer:fine)').matches) return; let last=0; document.addEventListener('pointermove',e=>{ const now=performance.now(); if(now-last<60) return; last=now; const s=document.createElement('span'); s.textContent=['âœ¨','ğŸ’–','ğŸŒˆ'][Math.floor(Math.random()*3)]; s.style.position='fixed'; s.style.left=(e.clientX-6)+'px'; s.style.top=(e.clientY-6)+'px'; s.style.fontSize='14px'; s.style.pointerEvents='none'; s.style.transition='transform .7s, opacity .7s'; document.body.appendChild(s); requestAnimationFrame(()=>{ s.style.transform='translateY(-14px) scale(1.1)'; s.style.opacity='0';}); setTimeout(()=>s.remove(),800); }); }catch(_){} })();

  // ===== UI bits
  const Progress=({current,total})=> (
    <div className="progress" aria-label="progression"><span style={{width:`${(current)/(total-1||1)*100}%`}}/></div>
  );
  const LevelPill=({children,onClick})=> (<button className="back" onClick={onClick} style={{background:'#ec4899',color:'#fff'}}>{children}</button>);
  const OptionButton=({index,emoji,label,onClick})=>{ const handle=(e)=>{ e.currentTarget.classList.add('pop'); setTimeout(()=> e.currentTarget.classList.remove('pop'), 220); onClick(e); }; return (
    <button className="opt" onClick={handle}>
      <span className="badge">{String.fromCharCode(65+index)}</span>
      <span className="emo">{emoji}</span>
      <span className="lbl">{label}</span>
    </button>
  );
  const Modal=({open,type='info',title,children,actions=[],onClose})=> open? (
    <div className="modal-wrap" onClick={onClose}>
      <div className="modal" role="dialog" aria-modal="true" data-type={type} onClick={e=>e.stopPropagation()}>
        <div className="big">{type==='bad'? 'ğŸ¦„ğŸ˜¢':'ğŸ‰'}</div>
        <h3>{title}</h3>
        <div>{children}</div>
        <div className="actions">
          {actions.length? actions.map((a,i)=> (
            <button key={i} className="back" onClick={a.onClick} style={a.primary?{background:'#ec4899',color:'#fff'}:null}>{a.label}</button>
          )) : <button className="back" onClick={onClose}>OK</button>}
        </div>
      </div>
    </div>
  ): null;

  // ===== Visual: base-10 dots
  const DotsBaseTen=({n})=>{ const d=Math.floor(n/10)%10, u=n%10; return (
    <div style={{display:'flex',gap:14,alignItems:'flex-start',margin:'6px 0 10px'}}>
      {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
      {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
    </div>
  );};
  const AdditionVisual=({a,b})=> (
    <div className="row" style={{alignItems:'flex-start'}}>
      <div><div className="caption" style={{fontWeight:700}}>A ({a})</div><DotsBaseTen n={a}/></div>
      <div style={{fontSize:22,alignSelf:'center'}}>+</div>
      <div><div className="caption" style={{fontWeight:700}}>B ({b})</div><DotsBaseTen n={b}/></div>
      <div style={{fontSize:22,alignSelf:'center'}}>= ?</div>
    </div>
  );

  // ===== Generic MCQ engine (with penalty)
  function MCQGame({title, items, onExit, onWrongPenalty, onWin}){
    const [i,setI]=useState(0); const [ok,setOk]=useState(0); const [wrongCounts,setWrongCounts]=useState({});
    const total=items.length; const item=items[i];
    const opts = useMemo(()=> shuffle([...item.options]), [i]);
    const submit=(opt,ev)=>{
      const label = typeof opt==='string'? opt : (opt.label||'');
      const good = label===item.answer;
      if(good){ setOk(x=>x+1); const r=ev.currentTarget.getBoundingClientRect(); confettiBurst(r.left+r.width/2, r.top+r.height/2); if(i+1<total) setI(i+1); else onWin(ok+1); }
      else { const c=(wrongCounts[i]||0)+1; setWrongCounts({...wrongCounts,[i]:c}); onWrongPenalty(c===1?1:3); }
    };
    return (
      <div className="card">
        <button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>{title}</h2>
        <div className="caption" style={{marginTop:2}}>{item.hint||''}</div>
        <div style={{fontSize:18,fontWeight:800,margin:'10px 0'}} aria-live="polite">{item.emoji? <span style={{marginRight:8}}>{item.emoji}</span>:null}{item.prompt}</div>
        <Progress current={i} total={total}/>
        <div className="grid cols-3" style={{marginTop:12}}>
          {opts.map((opt,idx)=>{ const lbl=typeof opt==='string'?opt:(opt.label||''); const emo=(typeof opt==='object'&&opt.emoji)?opt.emoji:'âœ…'; return <OptionButton key={lbl+idx} index={idx} emoji={emo} label={lbl} onClick={(e)=>submit(opt,e)}/> })}
        </div>
        <div className="caption" style={{marginTop:10}}>Question {i+1}/{total} â€” Score {ok}</div>
      </div>
    );
  }

  // ===== Math quiz (+, -, Ã—, Ã·, mix) levels with addition visual
  function ArithmeticQuiz({mode='+', onExit, onWrongPenalty, onWin}){
    const presets={1:{count:6,minA:1,maxA:10,minB:1,maxB:10},2:{count:8,minA:1,maxA:20,minB:1,maxB:20},3:{count:10,minA:1,maxA:50,minB:1,maxB:50}};
    const [lvl,setLvl]=useState(0);
    const cfg=presets[lvl];
    const pickOp=()=> ['+','-','x','/'][r(0,3)];
    const buildPool=()=>{ if(!cfg) return []; const q=[]; for(let i=0;i<cfg.count;i++){ let a=r(cfg.minA,cfg.maxA), b=r(cfg.minB,cfg.maxB), ans, op=(mode==='mix'?pickOp():mode); if(op==='x') ans=a*b; if(op==='+') ans=a+b; if(op==='-'){ if(a<b) [a,b]=[b,a]; ans=a-b;} if(op==='/'){ b=Math.max(1,r(cfg.minB,cfg.maxB)); const k=r(cfg.minA,cfg.maxA); a=k*b; ans=k;} q.push({a,b,ans,op}); } return q; };
    const [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});
    const pool=useMemo(buildPool,[lvl]); const total=pool.length; const q=pool[i]||{};
    const choices=useMemo(()=> q.ans!=null?makeChoices(q.ans):[], [i,lvl]);
    if(!lvl){ return (
      <div className="card"><button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>MathÃ©matiques Â· {mode==='+'?'Additions':mode==='-'?'Soustractions':mode==='x'?'Multiplications':mode==='/'?'Divisions':'Mix'}</h2>
        <p className="caption">Choisis un niveau.</p>
        <div className="row" style={{marginTop:8}}>
          <LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill>
          <LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill>
          <LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill>
        </div>
      </div> ); }
    const pick=(v,ev)=>{ const good=Number(v)===q.ans; if(good){ setScore(s=>s+1); const rct=ev.currentTarget.getBoundingClientRect(); confettiBurst(rct.left+rct.width/2, rct.top+rct.height/2); if(i+1<total) setI(i+1); else onWin(score+1, (lvl<3? ()=>{setLvl(lvl+1); setI(0); setScore(0);} : null)); } else { const c=(wrongCounts[i]||0)+1; setWrongCounts({...wrongCounts,[i]:c}); onWrongPenalty(c===1?1:3); } };
    return (
      <div className="card">
        <button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>MathÃ©matiques Â· {q.op||mode} Â· Niveau {lvl}</h2>
        <div style={{fontSize:28,fontWeight:900,margin:'10px 0'}} aria-live="polite">{q.a} {q.op||mode} {q.b} = ?</div>
        {(q.op||mode)==='+' && <AdditionVisual a={q.a} b={q.b}/>} 
        <Progress current={i} total={total}/>
        <div className="grid cols-3" style={{marginTop:12}}>
          {choices.map((c,idx)=> (<OptionButton key={idx} index={idx} emoji={'ğŸ”¢'} label={String(c)} onClick={(e)=>pick(c,e)}/> ))}
        </div>
        <div className="caption" style={{marginTop:10}}>Question {i+1}/{total} â€” Score {score}</div>
      </div>
    );
  }

  // ===== Place Value (unitÃ©s/dizaines/centaines) with levels
  function PlaceValue({onExit,onWrongPenalty,onWin}){
    const presets={1:{count:6,min:10,max:99},2:{count:8,min:100,max:999},3:{count:10,min:100,max:999}};
    const [lvl,setLvl]=useState(0); const [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({}); const [target,setTarget]=useState('dizaines');
    const cfg=presets[lvl]; const pool=useMemo(()=> cfg? Array.from({length:cfg.count},()=> r(cfg.min,cfg.max)) : [], [lvl]); const total=pool.length; const n=pool[i]||0; const u=n%10, d=Math.floor(n/10)%10, c=Math.floor(n/100)%10; const correct= target==='unitÃ©s'?u: target==='dizaines'?d:c;
    const choices=useMemo(()=> lvl?makeChoices(correct):[], [i,target,lvl]);
    const pick=(v,ev)=>{ const good=Number(v)===correct; if(good){ setScore(s=>s+1); const r=ev.currentTarget.getBoundingClientRect(); confettiBurst(r.left+r.width/2, r.top+r.height/2); if(i+1<total) setI(i+1); else onWin(score+1, (lvl<3? ()=>{setLvl(lvl+1); setI(0); setScore(0);} : null)); } else { const c=(wrongCounts[i]||0)+1; setWrongCounts({...wrongCounts,[i]:c}); onWrongPenalty(c===1?1:3); } };
    if(!lvl){ return (
      <div className="card">
        <button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>UnitÃ©s Â· Dizaines Â· Centaines</h2>
        <p className="caption">Choisis un niveau.</p>
        <div className="row" style={{marginTop:8}}>
          <LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill>
          <LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill>
          <LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill>
        </div>
      </div> ); }
    return (
      <div className="card">
        <button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>UnitÃ©s Â· Dizaines Â· Centaines Â· Niveau {lvl}</h2>
        <div className="back" style={{gap:8,marginBottom:8}}>Cible: <select className="back" onChange={e=>setTarget(e.target.value)} value={target}><option value="unitÃ©s">UnitÃ©s</option><option value="dizaines">Dizaines</option><option value="centaines">Centaines</option></select></div>
        <div style={{fontSize:28,fontWeight:900,margin:'10px 0'}} aria-live="polite">{n}</div>
        <DotsBaseTen n={n}/>
        <Progress current={i} total={total}/>
        <div className="grid cols-3" style={{marginTop:12}}>
          {choices.map((c,idx)=> (<OptionButton key={idx} index={idx} emoji={'ğŸ”Ÿ'} label={String(c)} onClick={(e)=>pick(c,e)}/> ))}
        </div>
        <div className="caption" style={{marginTop:10}}>Question {i+1}/{total} â€” Score {score}</div>
      </div>
    );
  }

  // ===== Lecture (Cloze) FR with levels
  const CLOZE_BANK=[
    { text:"Chaque matin, LÃ©na ____ Ã  l'Ã©cole.", options:["va","vont","allez"], answer:"va" },
    { text:"Le chat ____ sur le canapÃ©.", options:["dort","dorment","dormi"], answer:"dort" },
    { text:"Papa ____ un cafÃ©.", options:["boit","boivent","boire"], answer:"boit" },
    { text:"Nous ____ dans la cour.", options:["jouons","joue","jouent"], answer:"jouons" },
    { text:"Tu ____ le cartable.", options:["portes","portez","portent"], answer:"portes" },
    { text:"Ils ____ une chanson.", options:["chantent","chante","chantons"], answer:"chantent" }
  ];
  function ClozeWithLevels({onExit,onWrongPenalty,onWin}){
    const [lvl,setLvl]=useState(0); if(!lvl){return (
      <div className="card"><button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button><h2 style={{fontWeight:900,fontSize:22}}>Lecture Â· Choisis le mot</h2><p className="caption">Choisis un niveau.</p><div className="row" style={{marginTop:8}}><LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill><LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill><LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill></div></div> );}
    const parts=[CLOZE_BANK.slice(0,2), CLOZE_BANK.slice(0,4), CLOZE_BANK];
    const items=parts[lvl-1].map(x=>({prompt:x.text.replace('____','_____'), options:shuffle(x.options), answer:x.answer, emoji:'ğŸ“–'}));
    return <MCQGame title={`Lecture Â· Niveau ${lvl}`} items={items} onExit={onExit} onWrongPenalty={onWrongPenalty} onWin={(earned)=> onWin(earned, (lvl<3? ()=> setLvl(lvl+1): null))}/>;
  }

  // ===== Multi-level datasets (Saisons, Couleurs, Digital, SantÃ©, Social, NL, Famille)
  const SAISONS_LEVELS=[
    [ {emoji:'ğŸŒ¸',prompt:'Quelle saison ? (fleurs, abeilles ğŸ)',options:[{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'}],answer:'Printemps'}, {emoji:'â„ï¸',prompt:'Quelle saison ? (neige, gants ğŸ§¤)',options:[{label:'Hiver',emoji:'â„ï¸'},{label:'Automne',emoji:'ğŸ‚'}],answer:'Hiver'} ],
    [ {emoji:'ğŸŒ¸',prompt:'Je rÃ©veille les fleurs ğŸŒ· et les abeilles ğŸ. Qui suisâ€‘je ?',options:[{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Automne',emoji:'ğŸ‚'},{label:'Hiver',emoji:'â„ï¸'}],answer:'Printemps'}, {emoji:'ğŸ‚',prompt:'Je fais tomber les feuilles ğŸ. Qui suisâ€‘je ?',options:[{label:'Automne',emoji:'ğŸ‚'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'}],answer:'Automne'} ],
    [ {emoji:'â˜€ï¸',prompt:'Je ris trÃ¨s chaud ğŸ˜, la mer brille ğŸŒŠ.',options:[{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Automne',emoji:'ğŸ‚'},{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Hiver',emoji:'â„ï¸'}],answer:'Ã‰tÃ©'}, {emoji:'â„ï¸',prompt:'Je dessine des flocons â„ï¸ sur les vitres.',options:[{label:'Hiver',emoji:'â„ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Automne',emoji:'ğŸ‚'}],answer:'Hiver'} ]
  ];
  const COULEURS_LEVELS=[
    [ {emoji:'ğŸ”µğŸŸ¡',prompt:'Bleu + Jaune = ?',options:['Vert','Rouge'],answer:'Vert'}, {emoji:'ğŸ”´ğŸ”µ',prompt:'Rouge + Bleu = ?',options:['Violet','Orange'],answer:'Violet'} ],
    [ {emoji:'ğŸ”µğŸŸ¡',prompt:'Bleu + Jaune = ?',options:['Vert','Rouge','Violet'],answer:'Vert'}, {emoji:'ğŸ”´ğŸŸ¡',prompt:'Rouge + Jaune = ?',options:['Orange','Vert','Marron'],answer:'Orange'} ],
    [ {emoji:'âšªğŸ”´',prompt:'Blanc + Rouge = ?',options:['Rose','Violet','Orange','Marron'],answer:'Rose'}, {emoji:'âšªâš«',prompt:'Blanc + Noir = ?',options:['Gris','Marron','Violet','Orange'],answer:'Gris'} ]
  ];
  const DIGITAL_MOUSE_LEVELS=[[{emoji:'ğŸ–±ï¸',prompt:'Quel bouton pour cliquer ?',options:['Gauche','Droite'],answer:'Gauche'},{emoji:'âŒ¨ï¸',prompt:'Quelle touche pour espace ?',options:['Espace','EntrÃ©e'],answer:'Espace'}],[{emoji:'ğŸ–±ï¸',prompt:'Doubleâ€‘clic sert Ã â€¦',options:['Ouvrir','Ã‰teindre','Imprimer'],answer:'Ouvrir'},{emoji:'âŒ¨ï¸',prompt:'Quelle touche pour nouvelle ligne ?',options:['EntrÃ©e','Espace','Tab'],answer:'EntrÃ©e'}],[{emoji:'ğŸ–±ï¸',prompt:'Pour dÃ©placer un objet onâ€¦',options:['Cliquerâ€‘glisser','Doubleâ€‘clic','Scroll'],answer:'Cliquerâ€‘glisser'},{emoji:'âŒ¨ï¸',prompt:'CTRL + C sert Ã â€¦',options:['Copier','Coller','Couper','Fermer'],answer:'Copier'}]];
  const DIGITAL_NET_LEVELS=[[{emoji:'ğŸ”’',prompt:'Partagesâ€‘tu ton mot de passe ?',options:['Non','Oui'],answer:'Non'},{emoji:'ğŸ§‘â€ğŸ’»',prompt:'Un inconnu parle en ligneâ€¦',options:['Parler avec un adulte','Donner ton adresse'],answer:'Parler avec un adulte'}],[{emoji:'ğŸ“§',prompt:'Un email bizarreÂ : tuâ€¦',options:['Ne cliques pas','Cliques le lien'],answer:'Ne cliques pas'},{emoji:'ğŸ•µï¸',prompt:'Infos personnelles ?',options:['Ne pas partager','Partager'],answer:'Ne pas partager'}],[{emoji:'ğŸ›¡ï¸',prompt:'Sites sÃ»rs ont souventâ€¦',options:['https','http'],answer:'https'},{emoji:'ğŸ“£',prompt:'Une pub crie â€œTU AS GAGNÃ‰ !!!â€',options:['MÃ©fieâ€‘toi','Clique vite'],answer:'MÃ©fieâ€‘toi'}]];
  const SANTE_HYGIENE_LEVELS=[[{emoji:'ğŸ§¼',prompt:'Avant de manger jeâ€¦',options:['Me lave les mains','Cours'],answer:'Me lave les mains'},{emoji:'ğŸª¥',prompt:'Brossage des dentsÂ : combien ?',options:['2','0','1'],answer:'2'}],[{emoji:'ğŸ¤§',prompt:'Je tousseÂ : jeâ€¦',options:['Dans mon coude','Dans ma main'],answer:'Dans mon coude'},{emoji:'ğŸ›',prompt:'Je dois me laverâ€¦',options:['RÃ©guliÃ¨rement','Jamais'],answer:'RÃ©guliÃ¨rement'}],[{emoji:'ğŸ§´',prompt:'Le gel hydro sert Ã â€¦',options:['Nettoyer les mains','Boire'],answer:'Nettoyer les mains'}]];
  const SANTE_FOOD_LEVELS=[[{emoji:'ğŸğŸ«',prompt:'Le plus sain ?',options:['Pomme','Chocolat'],answer:'Pomme'},{emoji:'ğŸ¥¤ğŸ’§',prompt:'Meilleure boisson ?',options:['Eau','Soda'],answer:'Eau'}],[{emoji:'ğŸ¥¦ğŸŸ',prompt:'Ã‰nergie longueâ€¦',options:['LÃ©gumes','Frites'],answer:'LÃ©gumes'},{emoji:'ğŸğŸ¬',prompt:'Petitâ€‘dÃ©j Ã©quilibrÃ© ?',options:['Pain + fruit','Bonbons'],answer:'Pain + fruit'}],[{emoji:'ğŸ½ï¸',prompt:'Assiette idÃ©aleÂ ?',options:['Couleurs variÃ©es','Seulement frites'],answer:'Couleurs variÃ©es'}]];
  const SOCIAL_KINDNESS_LEVELS=[[{emoji:'ğŸ™‚',prompt:'Un ami est triste, tuâ€¦',options:['Ã‰coutes et aides','Te moques'],answer:'Ã‰coutes et aides'},{emoji:'ğŸ¤',prompt:'Dans un jeu, tuâ€¦',options:['Partages','Prends tout'],answer:'Partages'}],[{emoji:'ğŸ—£ï¸',prompt:'Tu veux parlerÂ : tuâ€¦',options:['Leves la main','Cries'],answer:'Leves la main'},{emoji:'ğŸ’¬',prompt:'Politesse ?',options:["Sâ€™il te plaÃ®t","Donne !"],answer:"Sâ€™il te plaÃ®t"}],[{emoji:'ğŸ§˜',prompt:'En colÃ¨reÂ : tuâ€¦',options:['Respires et parles','Pousses'],answer:'Respires et parles'}]];
  const NL_NUMBERS_LEVELS=[[{emoji:'1ï¸âƒ£',prompt:'â€œeenâ€ = ?',options:['1','2','3'],answer:'1'},{emoji:'2ï¸âƒ£',prompt:'â€œtweeâ€ = ?',options:['2','4','10'],answer:'2'}],[{emoji:'5ï¸âƒ£',prompt:'â€œvijfâ€ = ?',options:['5','6','8'],answer:'5'},{emoji:'8ï¸âƒ£',prompt:'â€œachtâ€ = ?',options:['7','8','9'],answer:'8'}],[{emoji:'ğŸ”¢',prompt:'â€œtienâ€ = ?',options:['10','12','20'],answer:'10'},{emoji:'ğŸ”¢',prompt:'â€œtwintigâ€ = ?',options:['20','12','22'],answer:'20'}]];
  const NL_GREETINGS_LEVELS=[[{emoji:'ğŸ‘‹',prompt:'â€œHolaâ€ en NL ?',options:['Hallo','AdiÃ³s'],answer:'Hallo'},{emoji:'ğŸŒ',prompt:'â€œBuenos dÃ­asâ€ ?',options:['Goeiemorgen','Goeienavond'],answer:'Goeiemorgen'}],[{emoji:'ğŸŒ™',prompt:'â€œBuenas nochesâ€ (salut) ?',options:['Goedenacht','Tot ziens'],answer:'Goedenacht'},{emoji:'ğŸ‘‹',prompt:'â€œAdiÃ³sâ€ ?',options:['Tot ziens','Hallo'],answer:'Tot ziens'}],[{emoji:'ğŸ™‚',prompt:'â€œPor favorâ€ (FRÂ : sâ€™il te plaÃ®t) ?',options:['Alsjeblieft','Dank je'],answer:'Alsjeblieft'}]];
  const FAMILLE_LEVELS=[[{emoji:'ğŸ‘©',prompt:'La maman estâ€¦',options:['maman','papa'],answer:'maman'},{emoji:'ğŸ‘¨',prompt:'Le papa estâ€¦',options:['papa','maman'],answer:'papa'}],[{emoji:'ğŸ‘§',prompt:'Ta sÅ“ur estâ€¦',options:['soeur','frÃ¨re'],answer:'soeur'},{emoji:'ğŸ‘¦',prompt:'Ton frÃ¨re estâ€¦',options:['frÃ¨re','grandâ€‘mÃ¨re'],answer:'frÃ¨re'}],[{emoji:'ğŸ‘µ',prompt:'La maman de ta maman estâ€¦',options:['grandâ€‘mÃ¨re','tante'],answer:'grandâ€‘mÃ¨re'}]];

  // ===== LevelGame generic wrapper
  function LevelGame({titlePrefix, levels, onExit, onWrongPenalty, onWin}){
    const [lvl,setLvl]=useState(0);
    if(!lvl){ return (
      <div className="card"><button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>{titlePrefix}</h2>
        <p className="caption">Choisis un niveau.</p>
        <div className="row" style={{marginTop:8}}><LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill><LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill><LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill></div>
      </div> ); }
    const items=levels[lvl-1];
    return <MCQGame title={`${titlePrefix} (Niv. ${lvl})`} items={items} onExit={onExit} onWrongPenalty={onWrongPenalty} onWin={(earned)=> onWin(earned, (lvl<3? ()=> setLvl(lvl+1): null))}/>;
  }

  // Short tale generator (big text)
  function TaleMaker({onExit}){ /* ... kept above ... */ }

  // ===== Number Line (add/sub)
  function NumberLineGame({onExit,onWrongPenalty,onWin}){ /* ... as above ... */ }

  // ===== Memory pairs (operations â†” rÃ©sultat)
  function MemoryGame({onExit,onWrongPenalty,onWin}){ /* ... as above ... */ }

  // ===== Equations (missing number/operator)
  function EquationsGame({onExit,onWrongPenalty,onWin}){ /* ... as above ... */ }

  // ===== Recall (order numbers smallestâ†’largest)
  function RecallGame({onExit,onWrongPenalty,onWin}){ /* ... as above ... */ }

  // ===== Sudoku 4Ã—4 (prÃ©-dÃ©finis)
  function Sudoku4({onExit,onWrongPenalty,onWin}){ /* ... as above ... */ }

  // ===== TaleMaker (reâ€‘dÃ©fini pour garantir sa prÃ©sence)
  function TaleMaker({onExit}){
    const lieux=['la forÃªt de lâ€™Aurore ğŸŒ²','le village de Brindille ğŸ¡','le bord de la mer ğŸŒŠ','la montagne bleue â›°ï¸'];
    const heros=['LÃ©na ğŸ¦„','Milo ğŸ»','ZoÃ© ğŸ¦Š','Nino ğŸ¼'];
    const amis=['un Ã©cureuil curieux ğŸ¿ï¸','un chat qui parle ğŸ±ğŸ’¬','une luciole brillante ğŸ”†','un petit robot ğŸ¤–'];
    const quetes=['retrouver une Ã©toile perdue â­','apprendre le secret des saisons ğŸŒ¸â˜€ï¸ğŸ‚â„ï¸','rendre des couleurs Ã  un tableau ğŸ¨','offrir un sourire Ã  quelquâ€™un de triste ğŸ˜Šâ¡ï¸ğŸ™‚'];
    const obstacles=['un pont cassÃ© ğŸŒ‰','un brouillard Ã©pais ğŸŒ«ï¸','une Ã©nigme Ã  rÃ©soudre ğŸ”','un vent capricieux ğŸ’¨'];
    const moral=['le courage grandit quand on le partage ğŸ’ªğŸ¤','un petit geste peut illuminer le monde âœ¨','on apprend en aidant les autres ğŸ‘©â€ğŸ«','la patience ouvre toutes les portes ğŸ—ï¸'];
    const pick=a=>a[r(0,a.length-1)];
    const mk=()=>{const L=pick(lieux), H=pick(heros), A=pick(amis), Q=pick(quetes), O=pick(obstacles), M=pick(moral); const name=H.split(' ')[0]; return [ `${H} habite prÃ¨s de ${L}. Chaque matin, ${name} dit Â« bonjour ! Â» aux oiseaux ğŸ¦ et au soleil â˜€ï¸.`, `Un jour, ${name} rencontre ${A}. Ensemble, ils dÃ©cident de ${Q}. Ils prÃ©parent un sac ğŸ’, une gourde ğŸ¥¤ et un grand sourire ğŸ˜„.`, `Le chemin est longâ€¦ Ils chantent ğŸ¶, sautent parâ€‘dessus les flaques ğŸ’§ et partagent une pomme ğŸ.`, `Soudain, ils doivent franchir ${O}. Ils respirent profondÃ©ment ğŸ§˜ et essayent encore ğŸ’«.`, `GrÃ¢ce Ã  leur entraide ğŸ¤, la route sâ€™ouvre âœ¨. Au loin, une lumiÃ¨re les guide ğŸ””.`, `Au coucher du soleil ğŸŒ‡, ils rÃ©ussissent leur mission. Ils comprennent que ${M}.` ]; };
    const [paras,setParas]=useState(mk());
    return (
      <div className="card"><button className="back" style={{marginBottom:10}} onClick={onExit}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>Contes âœ¨</h2>
        <p className="caption">Histoires (2â€“3 min) avec texte grand + emojis.</p>
        <div style={{fontSize:22,lineHeight:1.8,marginTop:10}}>{paras.map((p,i)=>(<p key={i} style={{margin:'10px 0'}}>{p}</p>))}</div>
        <div className="row" style={{marginTop:8}}><button className="back" onClick={()=>setParas(mk())}>Nouveau conte</button></div>
      </div>
    );
  }

  // ===== SubMenu & icons
  function IconButton({emoji,label,desc,onClick}){
    return (
      <button className="icon-btn" onClick={onClick} aria-label={label} title={label}>
        <div className="icon-emoji">{emoji}</div>
        <div className="icon-label">{label}</div>
        {desc && <div className="icon-desc">{desc}</div>}
      </button>
    );
  }
  function SubMenu({title,items,onBack}){
    return (
      <div className="card">
        <button className="back" style={{marginBottom:10}} onClick={onBack}>â† Retour</button>
        <h2 style={{fontWeight:900,fontSize:22}}>{title}</h2>
        <div className="grid cols-3" style={{marginTop:8}}>
          {items.map(it=>(
            <button key={it.key} className="icon-btn" onClick={it.onClick} aria-label={it.label} title={it.label}>
              <div className="icon-emoji">{it.emoji}</div>
              <div className="icon-label">{it.label}</div>
              {it.desc && <div className="icon-desc">{it.desc}</div>}
            </button>
          ))}
        </div>
      </div>
    );
  }

  // ===== App root
  function App(){
    const [screen,setScreen]=useState('home');
    const [bills,setBills]=useState(()=> Number(localStorage.getItem('bills')||'0'));
    const [modal,setModal]=useState({open:false});
    const goHome=()=> setScreen('home');
    const addBills=(n)=>{ const nb=bills+n; setBills(nb); localStorage.setItem('bills',String(nb)); };
    const onWrongPenalty=(amount)=>{ const nb=Math.max(0,bills-amount); setBills(nb); localStorage.setItem('bills',String(nb)); setModal({open:true,type:'bad',title:'Oupsâ€¦ Essaie encore !',children:(<div>ğŸ¦„ Tristounetâ€¦ Tu perds <b>{amount}</b> billet{amount>1?'s':''} ğŸ’¸</div>)}); };
    const onWin=(earned,nextLevel)=>{ addBills(earned); setModal({open:true,type:'good',title:'Bravo !',children:(<div>Tu as gagnÃ© {Array.from({length:earned}).map((_,i)=>(<span key={i} className="money">ğŸ’µ</span>))}</div>), actions:[ nextLevel? {label:'Niveau suivant',primary:true,onClick:()=>{ setModal({open:false}); nextLevel(); }}: null, {label:'Menu principal',onClick:()=>{ setModal({open:false}); goHome(); }} ].filter(Boolean)}); };

    // Routes
    if(screen==='quiz-add') return <ArithmeticQuiz mode="+" onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='quiz-sub') return <ArithmeticQuiz mode="-" onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='quiz-mul') return <ArithmeticQuiz mode="x" onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='quiz-div') return <ArithmeticQuiz mode="/" onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='quiz-mix') return <ArithmeticQuiz mode="mix" onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='place-value') return <PlaceValue onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='cloze') return <ClozeWithLevels onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='saisons') return <LevelGame titlePrefix="Moi et le monde Â· Saisons" levels={SAISONS_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='famille') return <LevelGame titlePrefix="Moi et le monde Â· Famille" levels={FAMILLE_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='couleurs') return <LevelGame titlePrefix="Arts Â· Couleurs" levels={COULEURS_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='souris') return <LevelGame titlePrefix="Culture numÃ©rique Â· Souris & clavier" levels={DIGITAL_MOUSE_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='internet') return <LevelGame titlePrefix="Culture numÃ©rique Â· Internet" levels={DIGITAL_NET_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='hygiene') return <LevelGame titlePrefix="SantÃ© Â· HygiÃ¨ne" levels={SANTE_HYGIENE_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='alimentation') return <LevelGame titlePrefix="SantÃ© Â· Alimentation" levels={SANTE_FOOD_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='bienveillance') return <LevelGame titlePrefix="Socioâ€‘relationnel Â· Bienveillance" levels={SOCIAL_KINDNESS_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='nl-nombres') return <LevelGame titlePrefix="NÃ©erlandais Â· Getallen (Nombres)" levels={NL_NUMBERS_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='nl-salut') return <LevelGame titlePrefix="NÃ©erlandais Â· Groeten (Salutations)" levels={NL_GREETINGS_LEVELS} onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='contes') return <TaleMaker onExit={goHome}/>;
    if(screen==='number-line') return <NumberLineGame onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='memory') return <MemoryGame onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='equations') return <EquationsGame onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='recall') return <RecallGame onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='sudoku4') return <Sudoku4 onExit={goHome} onWrongPenalty={onWrongPenalty} onWin={onWin}/>;
    if(screen==='nederlands') return (
      <SubMenu title="NÃ©erlandais â€” 2e primaire" onBack={goHome} items={[
        {key:'nl-lecture', emoji:'ğŸ“–', label:'Lecture (FR) Â· Cloze', desc:'ComplÃ¨te la phrase', onClick:()=>setScreen('cloze')},
        {key:'nl-nombres', emoji:'ğŸ”¢', label:'Getallen (Nombres)', desc:'1 Ã  20', onClick:()=>setScreen('nl-nombres')},
        {key:'nl-salut', emoji:'ğŸ‘‹', label:'Groeten (Salutations)', desc:'Bonjour, Au revoirâ€¦', onClick:()=>setScreen('nl-salut')},
      ]}/>
    );
    if(screen==='digital') return (
      <SubMenu title="Culture numÃ©rique â€” 2e primaire" onBack={goHome} items={[
        {key:'souris', emoji:'ğŸ–±ï¸', label:'Souris & clavier', desc:'Niveaux', onClick:()=>setScreen('souris')},
        {key:'internet', emoji:'ğŸŒ', label:'Internet', desc:'SÃ©curitÃ© & usage', onClick:()=>setScreen('internet')},
      ]}/>
    );
    if(screen==='sante') return (
      <SubMenu title="SantÃ© â€” 2e primaire" onBack={goHome} items={[
        {key:'hygiene', emoji:'ğŸ§¼', label:'HygiÃ¨ne', desc:'Lavage des mains, dents', onClick:()=>setScreen('hygiene')},
        {key:'alimentation', emoji:'ğŸ¥¦', label:'Alimentation', desc:'Choix sains', onClick:()=>setScreen('alimentation')},
      ]}/>
    );
    if(screen==='social') return (
      <SubMenu title="Socioâ€‘relationnel â€” 2e primaire" onBack={goHome} items={[
        {key:'bienveillance', emoji:'ğŸ™‚', label:'Bienveillance', desc:'Niveaux', onClick:()=>setScreen('bienveillance')},
      ]}/>
    );
    if(screen==='wereld') return (
      <SubMenu title="Moi et le monde â€” 2e primaire" onBack={goHome} items={[
        {key:'saisons', emoji:'â›…', label:'Saisons', desc:'Niveaux', onClick:()=>setScreen('saisons')},
        {key:'famille', emoji:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', label:'Famille & communautÃ©', desc:'Niveaux', onClick:()=>setScreen('famille')},
      ]}/>
    );

    // ===== Home
    return (
      <div className="container">
        <div className="header">
          <div className="brand"><div style={{fontSize:28}}>ğŸ¦„</div><div className="title">Appli de LÃ©na â€” 2e primaire</div></div>
          <div className="bill-purse" title="Billets">
            <span>ğŸ’µ</span> <b>{bills}</b>
          </div>
        </div>
        <div className="card">
          <div className="grid cols-3">
            <IconButton emoji="ğŸ‡³ğŸ‡±" label="NÃ©erlandais" desc="Lecture, nombres, salutations" onClick={()=>setScreen('nederlands')}/>
            <IconButton emoji="ğŸ‡«ğŸ‡·" label="FranÃ§ais (L2)" desc="Mots, phrases, jeux" onClick={()=>setScreen('cloze')}/>
            <IconButton emoji="ğŸ§®" label="Math Â· Mix" desc="+ âˆ’ Ã— Ã·" onClick={()=>setScreen('quiz-mix')}/>
            <IconButton emoji="ğŸ§ " label="MÃ©moire" desc="Paires" onClick={()=>setScreen('memory')}/>
            <IconButton emoji="ğŸ¯" label="Droite numÃ©rique" desc="Add/Sub" onClick={()=>setScreen('number-line')}/>
            <IconButton emoji="âˆ" label="Ã‰quations" desc="Nombre manquant" onClick={()=>setScreen('equations')}/>
            <IconButton emoji="ğŸ‘ï¸â€ğŸ—¨ï¸" label="Rappel" desc="Orden croissant" onClick={()=>setScreen('recall')}/>
            <IconButton emoji="ğŸ”Ÿ" label="UnitÃ©sÂ·Dizaines" desc="Base 10" onClick={()=>setScreen('place-value')}/>
            <IconButton emoji="ğŸŒ" label="Moi et le monde" desc="Saisons, famille" onClick={()=>setScreen('wereld')}/>
            <IconButton emoji="ğŸ¨" label="Arts & couleurs" desc="MÃ©langes" onClick={()=>setScreen('couleurs')}/>
            <IconButton emoji="ğŸ©º" label="SantÃ©" desc="HygiÃ¨ne, alimentation" onClick={()=>setScreen('sante')}/>
            <IconButton emoji="ğŸ’»" label="Culture numÃ©rique" desc="Souris, Internet" onClick={()=>setScreen('digital')}/>
            <IconButton emoji="ğŸ“š" label="Contes" desc="Histoires Ã  lire" onClick={()=>setScreen('contes')}/>
            <IconButton emoji="ğŸ§©" label="Sudoku 4Ã—4" desc="Mini sudoku" onClick={()=>setScreen('sudoku4')}/>
          </div>
        </div>
        <Modal {...modal} onClose={()=>setModal({open:false})}/>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>

  </body>
</html>