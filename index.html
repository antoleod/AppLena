<!doctype html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Appli de LÃ©na â€” 2e primaire</title>
    <meta name="theme-color" content="#f472b6">
    <meta name="color-scheme" content="light dark">
    <style>
      :root{
        --bg-1:#fdf2f8; --bg-2:#fae8ff; --bg-3:#e9d5ff; --fg:#1f2937;
        --card-bg: rgba(255,255,255,.94);
        --ring:#ec4899; --muted:#6b7280; --border:#f3e8ff;
        --good:#22c55e; --bad:#ef4444;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:linear-gradient(135deg,var(--bg-1),var(--bg-2),var(--bg-3));background-size:200% 200%;animation:bg-pan 24s linear infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}r infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}r infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}r infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}r infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}r infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}r infinite;color:var(--fg);-webkit-font-smoothing:antialiased;}@keyframes bg-pan{0%{background-position:0.icon-btn{position:relative;border:1px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#ec4899,#f59e0b,#10b981,#3b82f6,#8b5cf6) border-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:center;min-height:140px;box-shadow:0 6px 14px rgba(0,0,0,.05);transition:transform .12s ease, box-shadow .12s ease; cursor:pointer; color:var(--fg)}@keyframes rainbow{0%{background-position:0% 0%,0% 0%}100%{background-position:0% 0%,300% 300%}}der-box;background-size:100% 100%,300% 300%;animation:rainbow 8s linear infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bill{display:inline-block;margin:2px;font-size:22px; animation:jump .35s ease-in-out both}
      @keyframes jump{0%{transform:translateY(6px)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)}}
      /* Dots infinite;border-radius:22px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;text-align:c.bilfunction MCQGame({title, items, onExit, onWrongPenalty, onWin}){
        const [i,setI]=useState(0); const [ok,setOk]=useState(0);
        const [wrongCounts,setWrongCounts]=useState({});
        const total=items.length; const item=items[i];
        const opts = useMemo(()=> shuffle([...item.options]), [i]);
        const submit=(opt,ev)=>{
          const label = typeof opt==='string'? opt : (opt.label||'');
          const good = label===item.answer;
          if(good){
            setOk(x=>x+1);
            const r=ev.currentTarget.getBoundingClientRect(); confettiBurst(r.left+r.width/2, r.top+r.height/2);
            if(i+1<total) setI(i+1); else onWin(ok+1);
          }else{
            const curr=(wrongCounts[i]||0)+1; const penalty = curr===1?1:3;
            setWrongCounts({...wrongCounts,[i]:curr});
            onWrongPenalty(penalty);
          }
        };
        return (
          <div className="card">
            <button className="back" style={{marginBottom:12}} onClick={onExit}>â† Retour</button>
            <h2 style={{fontWeight:800,fontSize:22}}>{title}</h2>
            <div className="caption" style={{marginTop:4}}>{item.hint||''}</div>
            <div style={{fontSize:18,fontWeight:700,margin:"12px 0"}} aria-live="polite">{item.emoji? <span style={{marginRight:8}}>{item.emoji}</span> : null}{item.prompt}</div>
            <Progress current={i} total={total}/>
            <div className="grid cols-3" style={{marginTop:12}}>
              {opts.map((opt,idx)=> {
                const lbl = typeof opt==='string'? opt : (opt.label||'');
                const emo = typeof opt==='object' && opt.emoji? opt.emoji : 'âœ…';
                return <OptionButton key={lbl+idx} index={idx} emoji={emo} label={lbl} onClick={(e)=>submit(opt,e)} />
              })}
            </div>
            <div style={{marginTop:12,color:'var(--muted)'}}>Question {i+1}/{total} â€” Score {ok}</div>
          </div>
        );
      }

      // ===== Jeux: Math avec niveauxclassName="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        consconst [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});es</div><div className="row">{Array.from({lconst [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u// ===== Aide visuelle base 10 (centaines=ğŸ’¯, dizaines=â€¢, unitÃ©s=â€¢) =====
      function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        consconst [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});es</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====v>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====v>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux ===== cconst [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});ion DotsBaseTen({n}){
        const c=Math.const [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====v>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====v>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux ===== className=const [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});aseTen({n}){
        const c=Math.floor(n/1const [i,setI]=useState(0); const [score,setScore]=useState(0); const [wrongCounts,setWrongCounts]=useState({});Name="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====v>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====   function DotsBaseTen({n}){
        const c=Math.floor(n/100), d=Math.floor(n/10)%10, u=n%10;
        return (
          <div className="dots">
            {c>0 && <div><div className="caption">Centaines</div><div className="row">{Array.from({length:c}).map((_,i)=>(<span key={i} className="bill" aria-label="centaine">ğŸ’¯</span>))}</div></div>}
            {d>0 && <div><div className="caption">Dizaines</div><div className="ten">{Array.from({length:d*10}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
            {u>0 && <div><div className="caption">UnitÃ©s</div><div className="unit">{Array.from({length:u}).map((_,i)=>(<span key={i} className="dot"/>))}</div></div>}
          </div>
        );
      }

      // ===== ReprÃ©sentation en boules (unitÃ©s/dizaines/centaines) + niveaux =====ct = target==='unitÃ©s'?u: target==='dizaines'?d:c;
        const choices = useMemo(()=> lvl?makeChoices(correct):[], [i,target,lvl]);
        const pick=(v,ev)=>{ 
          const good = Number(v)===correct; 
          if(good){ 
            setScore(s=>s+1); const r=ev.currentTarget.getBoundingClientRect(); confettiBurst(r.left+r.width/2, r.top+r.height/2); 
            if(i+1<total) setI(i+1); else onWin(score+1, (lvl<3? ()=>{ setLvl(lvl+1); setI(0); setScore(0); }: null)); 
          } else { 
            const curr=(wrongCounts[i]||0)+1; setWrongCounts({...wrongCounts,[i]:curr}); onWrongPenalty(curr===1?1:3); 
          } 
        };
        if(!lvl){
          return (
            <div className="card">
              <button className="back" style={{marginBottom:12}} onClick={onExit}>â† Retour</button>
              <h2 style={{fontWeight:800,fontSize:22}}>UnitÃ©s Â· Dizaines Â· Centaines</h2>
              <p className="caption">Choisis un niveau pour commencer.</p>
              <div className="row" style={{marginTop:8}}>
                <LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill>
                <LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill>
                <LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill>
              </div>
            </div>
          );
        }
        return (
          <div className="card">
            <button className="back" style={{marginBottom:12}} onClick={onExit}>â† Retour</button>
            <h2 style={{fontWeight:800,fontSize:22}}>UnitÃ©s Â· Dizaines Â· Centaines Â· Niveau {lvl}</h2>
            <div className="back" style={{gap:8,marginBottom:12}}>Cible:
              <select className="back" onChange={e=>setTarget(e.target.value)} value={target} aria-label="Choisir la position">
                <option value="unitÃ©s">UnitÃ©s</option>
                <option value="dizaines">Dizaines</option>
                <option value="centaines">Centaines</option>
              </select>
            </div>
            <div style={{fontSize:28,fontWeight:800,margin:"12px 0"}} aria-live="polite">{n}</div>
            <DotsBaseTen n={n}/>
            <Progress current={i} total={total}/>
            <div className="grid cols-3" style={{marginTop:12}}>
              {choices.map((c,idx)=> (
                <OptionButton key={idx} index={idx} emoji={'ğŸ”Ÿ'} label={String(c)} onClick={(e)=>pick(c,e)} />
              ))}
            </div>
            <div style={{marginTop:12,color:'var(--muted)'}}>Question {i+1}/{total} â€” Score {score}</div>
          </div>
        );
      }

      // ===== Lecture (Cloze) avec niveaux (alÃ©atoire) =====
      const CLOZE_BASE = [
        { text:"Chaque matin, LÃ©na ____ Ã  l'Ã©cole.", options:["va","vont","allez"], answer:"va" },
        { text:"Le chat ____ sur le canapÃ©.", options:["dort","dorment","dormi"], answer:"dort" },
        { text:"Papa ____ un cafÃ©.", options:["boit","boivent","boire"], answer:"boit" },
        { text:"Nous ____ dans la cour.", options:["jouons","joue","jouent"], answer:"jouons" },
        { text:"Tu ____ le cartable.", optionsconst COULEURS_LEVELS = [
        [ // Niveau 1 â€“ 2 options
          { emoji:'ğŸ”µğŸŸ¡', prompt:'Bleu + Jaune = ?', options:['Vert','Rouge'], answer:'Vert' },
          { emoji:'ğŸ”´ğŸ”µ', prompt:'Rouge + Bleu = ?', options:['Violet','Orange'], answer:'Violet' },
          { emoji:'ğŸ”´ğŸŸ¡', prompt:'Rouge + Jaune = ?', options:['Orange','Vert'], answer:'Orange' }
        ],
        [ // Niveau 2 â€“ 3 options
          { emoji:'ğŸ”µğŸŸ¡', prompt:'Bleu + Jaune = ?', options:['Vert','Rouge','Violet'], answer:'Vert' },
          { emoji:'ğŸ”´ğŸ”µ', prompt:'Rouge + Bleu = ?', options:['Violet','Orange','Vert'], answer:'Violet' },
          { emoji:'ğŸ”´ğŸŸ¡', prompt:'Rouge + Jaune = ?', options:['Orange','Violet','Marron'], answer:'Orange' }
        ],
        [ // Niveau 3 â€“ 4 options
          { emoji:'ğŸ”µğŸ”´ğŸŸ¡', prompt:'Bleu + Rouge + Jaune = ?', options:['Marron','Rose','Gris','Vert'], answer:'Marron' },
          { emoji:'âšªğŸ”´', prompt:'Blanc + Rouge = ?', options:['Rose','Violet','Orange','Marron'], answer:'Rose' },
          { emoji:'âšªâš«', prompt:'Blanc + Noir = ?', options:['Gris','Marron','Violet','Orange'], answer:'Gris' }
        ]
      ];

      function LevelGame({titlePrefix, levels, onExit, onWrongPenalty, onWin}){
        const [lvl,setLvl]=useState(0);
        if(!lvl){
          return (
            <div className="card">
              <button className="back" style={{marginBottom:12}} onClick={onExit}>â† Retour</button>
              <h2 style={{fontWeight:800,fontSize:22}}>{titlePrefix}</h2>
              <p className="caption">Choisis un niveau.</p>
              <div className="row" style={{marginTop:8}}>
                <LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill>
                <LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill>
                <LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill>
              </div>
            </div>
          );
        }
        const items=levels[lvl-1];
        return <MCQGame title={`${titlePrefix} (Niv. ${lvl})`} items={items} onExit={onExit} onWrongPenalty={onWrongPenalty} onWin={(earned)=> onWin(earned, (lvl<3? ()=> setLvl(lvl+1): null))}/>;
      }

      function CouleursWithLevels(props){
        return <LevelGame titlePrefix="Arts Â· Couleurs" levels={COULEURS_LEVELS} {...props}/>;
      }

      // ===== Contes (gÃ©nÃ©rateur court) ===== prompt:'Blanc + Noir = ?', options:['Gris','Marron','Violet','Orange'], answer:'Gris' }
        ]
      ];

      function LevelGame({titlePrefix, levels, onExit, onWrongPenalty, onWin}){
        const [lvl,setLvl]=useState(0);
        if(!lvl){
          return (
            <div className="card">
              <button className="back" style={{marginBottom:12}} onClick={onExit}>â† Retour</button>
              <h2 style={{fontWeight:800,fontSize:22}}>{titlePrefix}</h2>
              <p className="caption">Choisis un niveau.</p>
              <div className="row" style={{marginTop:8}}>
                <LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill>
                <LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill>
                <LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill>
              </div>
            </div>
          );
        }
        const items=levels[lvl-1];
        return <MCQGame title={`${titlePrefix} (Niv. ${lvl})`} items={items} onExit={onExit} onWrongPenalty={onWrongPenalty} onWin={(earned)=> onWin(earned, (lvl<3? ()=> setLvl(lvl+1): null))}/>;
      }

      function CouleursWithLevels(props){
        return <LevelGame titlePrefix="Arts Â· Couleurs" levels={COULEURS_LEVELS} {...props}/>;
      }

      // ===== Contes (gÃ©nÃ©rateur court) ===== prompt:'Blanc + Noir = ?', options:['Gris','Marron','Violet','Orange'], answer:'Gris' }
        ]
      ];

      function LevelGame({titlePrefix, levels, onExit, onWrongPenalty, onWin}){
        const [lvl,setLvl]=useState(0);
        // ===== Jeux de monde & art (FR, multiâ€‘niveaux) =====
      const SAISONS_LEVELS = [
        [
          { emoji:'ğŸŒ¸', prompt:'Quelle saison ? (fleurs, abeilles ğŸ)', options:[{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'}], answer:'Printemps' },
          { emoji:'â„ï¸', prompt:'Quelle saison ? (neige, gants ğŸ§¤)', options:[{label:'Hiver',emoji:'â„ï¸'},{label:'Automne',emoji:'ğŸ‚'}], answer:'Hiver' },
          { emoji:'â˜€ï¸', prompt:'Quelle saison ? (soleil fort, glace ğŸ¦)', options:[{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'}], answer:'Ã‰tÃ©' }
        ],
        [
          { emoji:'ğŸŒ¸', prompt:"Je rÃ©veille les fleurs ğŸŒ· et les abeilles ğŸ. Qui suisâ€‘je ?", options:[{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Automne',emoji:'ğŸ‚'},{label:'Hiver',emoji:'â„ï¸'}], answer:'Printemps' },
          { emoji:'ğŸ‚', prompt:"Je fais tomber les feuilles ğŸ et je sens la cannelle. Qui suisâ€‘je ?", options:[{label:'Automne',emoji:'ğŸ‚'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'}], answer:'Automne' },
          { emoji:'â„ï¸', prompt:"Je couvre tout de blanc â›„. Qui suisâ€‘je ?", options:[{label:'Hiver',emoji:'â„ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'}], answer:'Hiver' }
        ],
        [
          { emoji:'ğŸŒ¸', prompt:'Je peins la terre de vert, jâ€™apporte la pluie fine ğŸŒ§ï¸ et le chant des oiseaux ğŸ¶.', options:[{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Automne',emoji:'ğŸ‚'},{label:'Hiver',emoji:'â„ï¸'}], answer:'Printemps' },
          { emoji:'â˜€ï¸', prompt:'Je ris trÃ¨s chaud ğŸ˜, la mer brille ğŸŒŠ, les glaces fondent ğŸ§.', options:[{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Automne',emoji:'ğŸ‚'},{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Hiver',emoji:'â„ï¸'}], answer:'Ã‰tÃ©' },
          { emoji:'ğŸ‚', prompt:'Je joue avec le vent ğŸƒ et je colorie les feuilles en or ğŸŸ ğŸŸ¡.', options:[{label:'Automne',emoji:'ğŸ‚'},{label:'Hiver',emoji:'â„ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'}], answer:'Automne' },
          { emoji:'â„ï¸', prompt:'Je murmure le silence et je dessine des flocons â„ï¸ sur les vitres.', options:[{label:'Hiver',emoji:'â„ï¸'},{label:'Printemps',emoji:'ğŸŒ¸'},{label:'Ã‰tÃ©',emoji:'â˜€ï¸'},{label:'Automne',emoji:'ğŸ‚'}], answer:'Hiver' }
        ]
      ];
      const COULEURS_LEVELS = [
        [
          { emoji:'ğŸ”µğŸŸ¡', prompt:'Bleu + Jaune = ?', options:['Vert','Rouge'], answer:'Vert' },
          { emoji:'ğŸ”´ğŸ”µ', prompt:'Rouge + Bleu = ?', options:['Violet','Orange'], answer:'Violet' },
          { emoji:'ğŸ”´ğŸŸ¡', prompt:'Rouge + Jaune = ?', options:['Orange','Vert'], answer:'Orange' }
        ],
        [
          { emoji:'ğŸ”µğŸŸ¡', prompt:'Bleu + Jaune = ?', options:['Vert','Rouge','Violet'], answer:'Vert' },
          { emoji:'ğŸ”´ğŸ”µ', prompt:'Rouge + Bleu = ?', options:['Violet','Orange','Vert'], answer:'Violet' },
          { emoji:'ğŸ”´ğŸŸ¡', prompt:'Rouge + Jaune = ?', options:['Orange','Violet','Marron'], answer:'Orange' }
        ],
        [
          { emoji:'ğŸ”µğŸ”´ğŸŸ¡', prompt:'Bleu + Rouge + Jaune = ?', options:['Marron','Rose','Gris','Vert'], answer:'Marron' },
          { emoji:'âšªğŸ”´', prompt:'Blanc + Rouge = ?', options:['Rose','Violet','Orange','Marron'], answer:'Rose' },
          { emoji:'âšªâš«', prompt:'Blanc + Noir = ?', options:['Gris','Marron','Violet','Orange'], answer:'Gris' }
        ]
      ];

      // ===== Jeux Ã  niveaux gÃ©nÃ©rique =====
      function LevelGame({titlePrefix, levels, onExit, onWrongPenalty, onWin}){
        const [lvl,setLvl]=useState(0);
        if(!lvl){
          return (
            <div className="card">
              <button className="back" style={{marginBottom:12}} onClick={onExit}>â† Retour</button>
              <h2 style={{fontWeight:800,fontSize:22}}>{titlePrefix}</h2>
              <p className="caption">Choisis un niveau.</p>
              <div className="row" style={{marginTop:8}}>
                <LevelPill onClick={()=>setLvl(1)}>Niveau 1</LevelPill>
                <LevelPill onClick={()=>setLvl(2)}>Niveau 2</LevelPill>
                <LevelPill onClick={()=>setLvl(3)}>Niveau 3</LevelPill>
              </div>
            </div>
          );
        }
        const items=levels[lvl-1];
 // ===== Jeux datasets supplÃ©mentaires =====
      const DIGITAL_MOUSE_LEVELS = [
        [
          {emoji:'ğŸ–±ï¸', prompt:'Quel bouton pour cliquer ?', options:['Gauche','Droite'], answer:'Gauche'},
          {emoji:'âŒ¨ï¸', prompt:'Quelle touche pour espace ?', options:['Espace','EntrÃ©e'], answer:'Espace'}
        ],[
          {emoji:'ğŸ–±ï¸', prompt:'Doubleâ€‘clic sert Ã â€¦', options:['Ouvrir','Ã‰teindre','Imprimer'], answer:'Ouvrir'},
          {emoji:'âŒ¨ï¸', prompt:'Quelle touche pour nouvelle ligne ?', options:['EntrÃ©e','Espace','Tab'], answer:'EntrÃ©e'}
        ],[
          {emoji:'ğŸ–±ï¸', prompt:'Pour faire glisser un objet onâ€¦', options:['Cliquerâ€‘glisser','Doubleâ€‘clic','Scroll'], answer:'Cliquerâ€‘glisser'},
          {emoji:'âŒ¨ï¸', prompt:'CTRL + C sert Ã â€¦', options:['Copier','Coller','Couper','Fermer'], answer:'Copier'}
        ]
      ];
      const DIGITAL_NET_LEVELS = [
        [
          {emoji:'ğŸ”’', prompt:'Partagesâ€‘tu ton mot de passe ?', options:['Non','Oui'], answer:'Non'},
          {emoji:'ğŸ§‘â€ğŸ’»', prompt:'Si un inconnu parle en ligneâ€¦', options:['Parler avec un adulte','Donner ton adresse'], answer:'Parler avec un adulte'}
        ],[
          {emoji:'ğŸ“§', prompt:'Un email bizarre: tuâ€¦', options:['Ne cliques pas','Cliques le lien'], answer:'Ne cliques pas'},
          {emoji:'ğŸ•µï¸', prompt:'Informations personnelles ?', options:['Ne pas partager','Partager'], answer:'Ne pas partager'}
        ],[
          {emoji:'ğŸ›¡ï¸', prompt:'Sites sÃ»rs ont souventâ€¦', options:['https','http'], answer:'https'},
          {emoji:'ğŸ“£', prompt:'Une pub crie â€œTU AS GAGNÃ‰ !!!â€', options:['MÃ©fieâ€‘toi','Clique vite'], answer:'MÃ©fieâ€‘toi'}
        ]
      ];
      const SANTE_HYGIENE_LEVELS=[
        [
          {emoji:'ğŸ§¼', prompt:'Avant de manger jeâ€¦', options:['Me lave les mains','Cours'], answer:'Me lave les mains'},
          {emoji:'ğŸª¥', prompt:'Combien de fois brosser les dents ?', options:['2','0','1'], answer:'2'}
        ],[
          {emoji:'ğŸ¤§', prompt:'Je tousse: jeâ€¦', options:['Dans mon coude','Dans ma main'], answer:'Dans mon coude'},
          {emoji:'ğŸ›', prompt:'Je dois me laverâ€¦', options:['RÃ©guliÃ¨rement','Jamais'], answer:'RÃ©guliÃ¨rement'}
        ],[
          {emoji:'ğŸ§´', prompt:'Le gel hydroalcoolique sert Ã â€¦', options:['Nettoyer les mains','Boire'], answer:'Nettoyer les mains'}
        ]
      ];
      const SANTE_FOOD_LEVELS=[
        [
          {emoji:'ğŸğŸ«', prompt:'Le plus sain ?', options:['Pomme','Chocolat'], answer:'Pomme'},
          {emoji:'ğŸ¥¤ğŸ’§', prompt:'Meilleure boisson ?', options:['Eau','Soda'], answer:'Eau'}
        ],[
          {emoji:'ğŸ¥¦ğŸŸ', prompt:'Pour lâ€™Ã©nergie longueâ€¦', options:['LÃ©gumes','Frites'], answer:'LÃ©gumes'},
          {emoji:'ğŸğŸ¬', prompt:'Petitâ€‘dÃ©j Ã©quilibrÃ© ?', options:['Pain + fruit','Bonbons'], answer:'Pain + fruit'}
        ],[
          {emoji:'ğŸ½ï¸', prompt:'Mon assiette idÃ©ale aâ€¦', options:['Couleurs variÃ©es','Seulement frites'], answer:'Couleurs variÃ©es'}
        ]
      ];
      const SOCIAL_KINDNESS_LEVELS=[
        [
          {emoji:'ğŸ™‚', prompt:'Un ami est triste, tuâ€¦', options:['Ã‰coutes et aides','Te moques'], answer:'Ã‰coutes et aides'},
          {emoji:'ğŸ¤', prompt:'Dans un jeu, tuâ€¦', options:['Partages','Prends tout'], answer:'Partages'}
        ],[
          {emoji:'ğŸ—£ï¸', prompt:'Tu veux parler: tuâ€¦', options:['Leves la main','Cries'], answer:'Leves la main'},
          {emoji:'ğŸ’¬', prompt:'Politesse ?', options:['Sâ€™il te plaÃ®t','Donne !'], answer:'Sâ€™il te plaÃ®t'}
        ],[
          {emoji:'ğŸ§˜', prompt:'En colÃ¨re: tuâ€¦', options:['Respires et parles','Pousses'], answer:'Respires et parles'}
        ]
      ];
      const NL_NUMBERS_LEVELS=[
        [
          {emoji:'1ï¸âƒ£', prompt:'â€œeenâ€ = ?', options:['1','2','3'], answer:'1'},
          {emoji:'2ï¸âƒ£', prompt:'â€œtweeâ€ = ?', options:['2','4','10'], answer:'2'}
        ],[
          {emoji:'5ï¸âƒ£', prompt:'â€œvijfâ€ = ?', options:['5','6','8'], answer:'5'},
          {emoji:'8ï¸âƒ£', prompt:'â€œachtâ€ = ?', options:['7','8','9'], answer:'8'}
        ],[
          {emoji:'ğŸ”¢', prompt:'â€œtienâ€ = ?', options:['10','12','20'], answer:'10'},
          {emoji:'ğŸ”¢', prompt:'â€œtwintigâ€ = ?', options:['20','12','22'], answer:'20'}
        ]
      ];
      const NL_GREETINGS_LEVELS=[
        [
          {emoji:'ğŸ‘‹', prompt:'Comment dire â€œHolaâ€ en NL ?', options:['Hallo','AdiÃ³s'], answer:'Hallo'},
          {emoji:'ğŸŒ', prompt:'â€œBuenos dÃ­asâ€ = ?', options:['Goeiemorgen','Goeienavond'], answer:'Goeiemorgen'}
        ],[
          {emoji:'ğŸŒ™', prompt:'â€œBuenas nochesâ€ (salut) = ?', options:['Goedenacht','Tot ziens'], answer:'Goedenacht'},
          {emoji:'ğŸ‘‹', prompt:'â€œAdiÃ³sâ€ = ?', options:['Tot ziens','Hallo'], answer:'Tot ziens'}
        ],[
          {emoji:'ğŸ™‚', prompt:'â€œPor favorâ€ (FR: sâ€™il te plaÃ®t) = ?', options:['Alsjeblieft','Dank je'], answer:'Alsjeblieft'}
        ]
      ];
      const FAMILLE_LEVELS=[
        [
          {emoji:'ğŸ‘©', prompt:'La maman estâ€¦', options:['maman','papa'], answer:'maman'},
          {emoji:'ğŸ‘¨', prompt:'Le papa estâ€¦', options:['papa','maman'], answer:'papa'}
        ],[
          {emoji:'ğŸ‘§', prompt:'Ta sÅ“ur estâ€¦', options:['soeur','frÃ¨re'], answer:'soeur'},
          {emoji:'ğŸ‘¦', prompt:'Ton frÃ¨re estâ€¦', options:['frÃ¨re','grandâ€‘mÃ¨re'], answer:'frÃ¨re'}
        ],[
          {emoji:'ğŸ‘µ', prompt:'La maman de ta maman estâ€¦', options:['grandâ€‘mÃ¨re','tante'], answer:'grandâ€‘mÃ¨re'}
        ]
      ];

      function DigitalMouseWithLevels(props){ return <LevelGame titlePrefix="Culture numÃ©rique Â· Souris & clavier" levels={DIGITAL_MOUSE_LEVELS} {...props}/>; }
      function DigitalNetWithLevels(props){ ret
